# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã Telegram –±–æ—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –±–æ—Ç–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª –î–ó2 (TTS), –Ω–æ –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å –î–ó1 (STT).

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –±–æ—Ç–æ–≤

### 1. `bot_simple.py` - –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç —Ç–æ–ª—å–∫–æ —Å TTS
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –¢–µ–∫—Å—Ç ‚Üí –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤–∞—à—É TTS –º–æ–¥–µ–ª—å (Piper)
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç STT –∏ LLM

**–ó–∞–ø—É—Å–∫:**
```bash
cd telegram_bot
python bot_simple.py
```

### 2. `bot_tts_llm.py` - –ë–æ—Ç —Å TTS –∏ LLM
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –¢–µ–∫—Å—Ç ‚Üí LLM ‚Üí –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç–≤–µ—Ç LLM –≤ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ (–∫–æ–º–∞–Ω–¥–∞ `/new` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏)

**–ó–∞–ø—É—Å–∫:**
```bash
cd telegram_bot
python bot_tts_llm.py
```

### 3. `stt_simple.py` - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è STT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏, –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è (Whisper –∏–ª–∏ Google Speech Recognition).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ë–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
```bash
pip install aiogram python-dotenv
```

–î–ª—è `bot_tts_llm.py` —Ç–∞–∫–∂–µ –Ω—É–∂–Ω—ã:
```bash
pip install transformers torch
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ Telegram

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
export TELEGRAM_TOKEN='–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather'
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª .env**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `telegram_bot/`:
```
TELEGRAM_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
TTS_MODEL_PATH=/tf/nspeganov/Speech_recognition_n_synthesis/tts_data/final_model/final_model.onnx
```

**–í–∞–∂–Ω–æ:** –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –≤–∞—à–µ–π –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏–∑ –î–ó2. –û–±—ã—á–Ω–æ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
- `tts_data/final_model/final_model.onnx` (–ø–æ—Å–ª–µ —ç–∫—Å–ø–æ—Ä—Ç–∞)
- –ò–ª–∏ –≤ `tts_data/lightning_logs/version_X/checkpoints/*.onnx` (–µ—Å–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ —á–µ–∫–ø–æ–∏–Ω—Ç)

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä—è–º–æ –≤ –∫–æ–¥–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –±–æ—Ç–∞ –∏ –∑–∞–º–µ–Ω–∏—Ç–µ `"YOUR_TELEGRAM_BOT_TOKEN"` –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –∫ –º–æ–¥–µ–ª—è–º

‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–∏ –∫ TTS –º–æ–¥–µ–ª–∏**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Ç—å: `/tf/nspeganov/Speech_recognition_n_synthesis/tts_data/final_model/final_model.onnx`

**–í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

1. **–ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```bash
   export TTS_MODEL_PATH="/–ø—É—Ç—å/–∫/–≤–∞—à–µ–π/–º–æ–¥–µ–ª–∏.onnx"
   ```

2. **–ß–µ—Ä–µ–∑ —Ñ–∞–π–ª .env:**
   ```
   TTS_MODEL_PATH=/–ø—É—Ç—å/–∫/–≤–∞—à–µ–π/–º–æ–¥–µ–ª–∏.onnx
   ```

3. **–ü—Ä—è–º–æ –≤ –∫–æ–¥–µ:**
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `tts.py` - –∏–∑–º–µ–Ω–∏—Ç–µ `default_init["model_path"]`
   - –ò–ª–∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –ø—É—Ç—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: `TTS(model_path="–≤–∞—à/–ø—É—Ç—å/–∫/–º–æ–¥–µ–ª–∏.onnx")`

**–ì–¥–µ –Ω–∞–π—Ç–∏ –≤–∞—à—É –º–æ–¥–µ–ª—å:**
- –û–±—ã—á–Ω–æ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `tts_data/final_model/final_model.onnx` (–ø–æ—Å–ª–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞ –î–ó2)
- –ò–ª–∏ –≤ `tts_data/lightning_logs/version_X/checkpoints/*.onnx` (–µ—Å–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ —á–µ–∫–ø–æ–∏–Ω—Ç)

**llm.py:**
```python
default_init = {
    "model_path": "MTSAIR/Cotype-Nano",  # –∏–ª–∏ –ø—É—Ç—å –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π STT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏, –Ω–æ –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å —Å –î–ó1, –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Whisper (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
pip install openai-whisper
```

–ó–∞—Ç–µ–º –≤ `bot_llm.py` –∑–∞–º–µ–Ω–∏—Ç–µ:
```python
from stt import STT
```
–Ω–∞:
```python
from stt_simple import STT_Simple as STT
```

–ò –∏–∑–º–µ–Ω–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:
```python
stt = STT(method="whisper", model_size="base")
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Google Speech Recognition
```bash
pip install SpeechRecognition
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Whisper, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å `bot_simple.py`** - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–∞—à–µ–π TTS –º–æ–¥–µ–ª—å—é.

2. **–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å LLM** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `bot_tts_llm.py`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ LLM –º–æ–¥–µ–ª–∏.

3. **–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `stt_simple.py` —Å Whisper –∏–ª–∏ Google Speech Recognition, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
telegram_bot/
‚îú‚îÄ‚îÄ bot_simple.py          # –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç: —Ç–µ–∫—Å—Ç ‚Üí –≥–æ–ª–æ—Å ‚úÖ
‚îú‚îÄ‚îÄ bot_tts_llm.py         # –ë–æ—Ç —Å LLM: —Ç–µ–∫—Å—Ç ‚Üí LLM ‚Üí –≥–æ–ª–æ—Å ‚úÖ
‚îú‚îÄ‚îÄ tts.py                 # TTS –∫–ª–∞—Å—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à—É –º–æ–¥–µ–ª—å –∏–∑ –î–ó2) ‚úÖ
‚îú‚îÄ‚îÄ llm.py                 # LLM –∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ stt_simple.py          # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è STT (Whisper/Google) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
‚îú‚îÄ‚îÄ .env                   # –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (—Å–æ–∑–¥–∞–π—Ç–µ —Å–∞–º–∏)
‚îî‚îÄ‚îÄ README_SIMPLE_BOTS.md   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### bot_simple.py
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?
–ë–æ—Ç: [–≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"]
```

### bot_tts_llm.py
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç
–ë–æ—Ç: [—Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç LLM]
–ë–æ—Ç: [–≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—Ç–≤–µ—Ç–æ–º LLM]
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "TELEGRAM_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª .env
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —É @BotFather)

### –û—à–∏–±–∫–∞: "–ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è: `echo $TTS_MODEL_PATH`
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –≤ `tts.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä—è–¥–æ–º —Å `.onnx` —Ñ–∞–π–ª–æ–º –µ—Å—Ç—å `.onnx.json` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

### –û—à–∏–±–∫–∞: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏"
- –î–ª—è LLM –º–æ–¥–µ–ª–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å batch size

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–∞—Ö `bot_simple.log` –∏–ª–∏ `bot_tts_llm.log`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–æ–≤:
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞ TTS
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—Ä–∞–∑
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤

–£–¥–∞—á–∏ —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º! üöÄ

